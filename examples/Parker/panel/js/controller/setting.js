SettingController=Module.controller("SettingController",["$scope","$routeParams",function(t,o){function n(){app.readFile(app.getLocalDir()+"/setting_v3.json").then(function(o){t.setting=JSON.parse(o),console.log(t.setting),t.$apply()})}function i(){app.writeFile(app.getLocalDir()+"/setting_v3.json",JSON.stringify(t.setting))}t.setting={},t.colors=!1;var e="";t.saveSetting=function(o,n){t.setting.mark[o]=n,i()},t.changeColor=function(o){e=o,t.colors=!0},t.selectColor=function(o){""!=e&&t.saveSetting(e,{background:o}),e="",t.colors=!1},t.removeColor=function(o){t.setting.colorList.splice(t.setting.colorList.indexOf(o),1),i()},t.addColor=function(){if(t.setting.colorList.length>=6)return void app.showToast("最多添加6个颜色哦~");var o=$("#color-input").val().trim();""!=o&&/^#\w{6}/.test(o)&&(t.setting.colorList.push(o),$("#color-input").val(""),i())},t.back=function(){i(),t.colors?t.colors=!1:t.$emit("GO_PANEL")},n()}]);