LoginController=Module.controller("LoginController",["$scope","$location",function(i,n){i.isLogining=!1,i.config={email:"",password:"",app:app.id,device_mac:""};var o="";i.init=function(){var n=app.getConfigFile();app.readFile(n).then(function(n){i.config=JSON.parse(n),i.$apply(),i.$emit("LOGIN_SUCCESS",i.config)}),app.getMac().then(function(n){i.config.device_mac=n,o=n})},i.login=function(){if(!i.isLogining){i.config.email=$("#mail").val().trim(),i.config.password=$("#password").val().trim();var n="http://www.cutterman.cn/client/login";app.post(n,i.config).then(function(n){console.log(n),0==n.errno?(i.config=n,i.config.device_mac=o,i.config.app=app.id,app.writeFile(app.getConfigFile(),JSON.stringify(n)),i.$emit("LOGIN_SUCCESS",i.config)):(app.showToast(n.info),i.$apply())},function(n){i.isLogining=!1,i.$apply(),app.showToast(n)})}},i.register=function(){app.openURL("http://www.cutterman.cn/user/register")},i.init()}]);